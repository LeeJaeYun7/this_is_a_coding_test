
```
방법 2. 개선된 다익스트라 알고리즘
- 이제 개선된 다익스트라 알고리즘에 대해 알아보자.
   재차 설명하지만, 다익스트라 알고리즘을 간단히 구현하면 
   시간 복잡도가 O(V2)이다. 하지만 지금 배울 구현 방법을 이용하면
   다익스트라 최단 경로 문제를 최악의 경우에도 시간 복잡도 O(ElogV)를 보장하여
   해결할 수 있다.
    여기서 V는 노드의 개수이고, E는 간선의 개수를 의미한다. 

간단한 다익스트라 알고리즘은 '최단 거리가 가장 짧은 노드'를 찾기 위해서,
매번 최단 거리 테이블을 선형적으로(모든 원소를 앞에서부터 하나씩) 탐색해야 했다. 
이 과정에서만 O(V)의 시간이 걸렸다.
하지만 최단 거리가 가장 짧은 노드를 단순히 선형적으로 찾는 것이 아니라
더욱 더 빠르게 찾을 수 있다면 어떨까?
알고리즘의 시간 복잡도를 더욱 줄일 수 있을 것이다. 

개선된 다익스트라 알고리즘에서는 힙(Heap) 자료구조를 사용한다.
힙 자료구조를 이용하게 되면 특정 노드까지의 최단 거리에 대한 정보를
힙에 담아서 처리하므로 출발 노드로부터 가장 거리가 짧은 노드를 더욱 빠르게
찾을 수 있다.
이 과정에서 선형 시간이 아닌 로그 시간이 걸린다.
N=1000000일 때, log2N이 약 20인 것을 감안하면 속도가 획기적으로 빨라지는 것임을
이해할 수 있다. 


힙 설명
- 힙 자료구조에 대해서 간단히 알아보자. 
  힙 자료구조는 우선순위 큐를 구현하기 위하여 사용하는 자료구조 중 하나다.
  5장에서 DFS/BFS를 공부할 때, 스택과 큐의 원리에 대해서 알아보았다. 
  스택은 가장 나중에 삽입된 데이터를 가장 먼저 삭제하고,
  큐는 가장 먼저 삽입된 데이터를 가장 먼저 삭제한다. 

- 우선순위 큐는 우선순위가 가장 높은 데이터를 가장 먼저 삭제한다는 점이 특징이다.
   스택, 큐, 우선순위 큐 자료구조를 비교한 내용을 표로 나타내면 다음과 같다.

스택(Stack) - 가장 나중에 삽입된 데이터
힙(Heap) - 가장 먼저 삽입된 데이터
우선순위 큐(Priority Queue) - 가장 우선순위가 높은 데이터

이러한 우선순위 큐는 데이터를 우선순위에 따라 처리하고 싶을 때 사용한다
예를 들어, 여러 개의 물건 데이터를 자료구조에 넣었다가 가치가 높은 물건 데이터부터
꺼내서 확인해야 하는 경우를 가정해보자. 
이런 경우에 우선순위 큐 자료구조를 이용하면 효과적이다. 

대부분의 프로그래밍 언어에서는 우선순위 큐 라이브러리를 지원하기 때문에
일반적인 코딩 테스트 환경에서 우리가 직접 힙 자료구조부터 작성해서
우선순위 큐를 구현할 일은 없다.
따라서 이 책에서도 힙을 구현하는 방법에 대해서는 다루지 않을 것이다. 

파이썬에서는 우선순위 큐가 필요할 때 PriorityQueue 혹은 heapq를 사용할 수 있는데,
이 두 라이브러리는 모두 우선순위 큐 기능을 지원한다.
다만, PriorityQueue 보다는 일반적으로 heapq가 더 빠르게 동작하기 때문에
수행 시간이 제한된 상황에서는 heapq를 사용하는 것을 권장한다

우선순위 값을 표현할 때는 일반적으로 정수형 자료형의 변수가 사용된다.
예를 들어, 물건 정보가 있고,
이 물건 정보는 물건의 가치와 물건의 무게로만 구성된다고 가정해보자. 
그러면 모든 물건 데이터를 (가치, 물건)으로 묶어서 우선순위 큐 자료구조에 넣을 수 있다.
이후에 우선순위 큐에서 물건을 꺼내게 되면 항상 가치가 높은 물건이 먼저 나오게 된다.
대부분의 프로그래밍 언어에서는 우선순위 큐 라이브러리에 데이터의 묶음을 넣으면,
첫 번째 원소를 기준으로 우선순위를 설정한다.
따라서 데이터가 (가치, 물건)으로 구성된다면 '가치'값이 우선순위 값이 되는 것이다. 
이는 파이썬에서도 마찬가지다.

또한 우선순위 큐를 구현할 때는 내부적으로 최소 힙 혹은 최대 힙을 이용한다.
최소 힙을 이용하는 경우 '값이 낮은 데이터가 먼저 삭제'되며, 최대 힙을 이용하는 경우
'값이 큰 데이터가 먼저 삭제'된다. 파이썬 라이브러리에서는 기본적으로 최소 힙 구조를 이용하는데
다익스트라 최단 경로 알고리즘에서는 비용이 적은 노드를 우선하여 방문하므로
최소 힙 구조를 기반으로 하는 파이썬의 우선순위 큐 라이브러리를 그대로 사용하면 적합하다. 

또한, 최소 힙을 최대 힙처럼 사용하기 위해서 일부러 우선순위에 해당하는 값에
음수 부호(-)를 붙여서 넣었다가, 나중에 우선순위 큐에서 꺼낸 다음에
다시 음수 부호(-)를 붙여서 원래의 값으로 돌리는 방식을 사용할 수 있다.
이러한 테크닉도 실제 코딩 테스트 환경에서는 자주 사용되기 때문에 기억해 놓자. 

앞서 우선순위 큐를 구현할 때는 힙 자료구조를 이용한다고 했는데,
사실 우선순위 큐를 구현하는 방법은 다양하다.
단순히 리스트를 이용해서 구현할 수도 있다. 

데이터의 개수가 N개일 때, 구현 방식에 따라서 시간 복잡도를 비교한 내용을 표로 확인해보자.
리스트를 이용해서 우선순위 큐의 기능을 구현하기 위해서는
삭제할 때마다 모든 원소를 확인해서 우선순위가 가장 높은 것을 찾아야 하므로
최악의 경우 O(N)의 시간이 소요된다. 

우선순위 큐 구현 방식   삽입 시간     삭제 시간
리스트                              O(1)               O(N)
힙(Heap)                          O(logN)          O(logN)

데이터의 개수가 N개 일 때, 힙 자료구조에 N개의 데이터를 모두 넣은 뒤에 
다시 모든 데이터를 꺼낸다고 해보자.
이 때의 시간 복잡도는 어떻게 될까?
삽입할 때는 O(logN)의 연산을 N번 반복하므로 O(NlogN)이고
삭제할 때에도 O(logN)의 연산을 N번 반복하므로 O(NlogN)이다.
따라서 전체 연산 횟수는 대략 2NlogN으로 빅오 표기법에 따라
전체 시간 복잡도는 O(NlogN)이 될 것이다. 

사실 이는 힙 정렬의 원리를 설명한 것이며,
힙 정렬 구현 소스코드는 부록 A의 파이썬 문법 파트에서 제시하고 있다. 
만약 동일한 작업을 리스트를 이용해 수행하고자 한다면,
시간 복잡도가 O(N2)이다
N이 커지면 커질수록 시간 차이는 극명할 것이며,
대부분의 경우 힙을 이용했을 때 훨씬 빠르게 동작한다.
이처럼 힙을 이용하는 경우 모든 원소를 저장한 뒤에 우선순위에 맞게 빠르게 
뽑아낼 수 있으므로 힙은 '우선순위 큐'를 구현하는데 가장 많이 사용된다. 

최소 힙을 이용하는 경우 힙에서 원소를 꺼내면 '가장 값이 작은 원소'가 추출되는 특징이 있으며,
파이썬의 우선순위 큐 라이브러리는 최소 힙에 기반한다는 점을 기억하자.
우리는 이러한 최소 힙을 다익스트라 최단 경로 알고리즘에 적용할 것이다.
단순히 우선순위 큐를 이용해서 시작 노드로부터 '거리'가 짧은 노드 순서대로 큐에서 나올 수 있도록 다익스트라 알고리즘을 작성하면 된다.

이번에는 단계별로 우선순위 큐가 어떻게 변하는지를 중심으로 살펴보자.
다음 그림에서는 단순히 우선순위 큐를 개념적으로 보여줄 것이다.
우선순위 큐 그림에서는 각 원소를 거리가 짧은 순서대로 왼쪽부터 나열하겠다. 
우선순위 큐를 적용하여도 다익스트라 알고리즘이 동작하는 기본 원리는 동일하다.

최단 거리를 저장하기 위한 1차원 리스트(최단 거리 테이블)는 아까와 같이
그대로 이용하고, 현재 가장 가까운 노드를 저장하기 위한 목적으로만 우선순위 큐를 
추가로 이용한다고 보면 된다.
```
